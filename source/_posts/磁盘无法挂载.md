---
title: 磁盘无法挂载
date: 2019-01-18 15:40:12
tags: linux
categories: system
---

## 案例

今天一机器的磁盘掉了，机房更换了硬盘。看了下前人都是写在`/etc/fstab`里面，个人不推荐写这里，写入`/etc/rc.local`更加好

然后修改了/etc/fstab，然后mount -a挂载，没报错，df -h没看到挂上去的盘，很奇怪。

查看了下message日志：
```
Jan 18 14:55:55 SH-HDP1136 systemd: Unmounted /mnt/disk4.
Jan 18 14:55:55 SH-HDP1136 systemd: Unit mnt-disk4.mount entered failed state.
Jan 18 14:56:41 SH-HDP1136 kernel: XFS (sdd): Mounting V5 Filesystem
Jan 18 14:56:41 SH-HDP1136 kernel: XFS (sdd): Ending clean mount
Jan 18 14:56:41 SH-HDP1136 systemd: Unit mnt-disk4.mount is bound to inactive unit dev-disk-by\x2duuid-5aad6483\x2de21f\x2d498d\x2d9c8c\x2dfeff9fd5be76.device. Stopping, too.
```

最后一行谷歌查了下文档，第一篇文档说是用了`重启大法`。因为服务器比较重要，没考虑重启。

然后找到第二篇文档，说执行`systemctl-reload`，然后进行挂载。

尝试了下，的确成功了。

## 诡异的systemctl-reload

但心里很纳闷，我修改个/etc/fstab和systemctl-reload有半毛钱关系，继续查了下谷歌，发现这是一个redhat7.4的bug。。。。。

Bug ID: 1566088

https://bugzilla.redhat.com/show_bug.cgi?id=1566088





refer:
> http://mamchenkov.net/wordpress/2017/11/09/systemd-strikes-again-unit-var-whatever-mount-is-bound-to-inactive-unit/
> https://bugzilla.redhat.com/show_bug.cgi?id=1566088
